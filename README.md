  <a href="https://git.io/typing-svg">
    <img src="https://readme-typing-svg.herokuapp.com?font=Fira+Code&weight=700&size=45&pause=1000&color=00E5FF&center=true&vCenter=true&width=1500&lines=Network+Automation+Series;Building+Intent-Based+Networks;AI-Powered+Networking+with+MCP" alt="Network Automation Series" />
  </a>
</p>

<p align="center">
  <img src="assets/Series Thumpnail.jpg" alt="Network Coder Banner" width="800">
</p>

<p align="center">
  <img src="https://img.shields.io/badge/Network-007ACC?style=for-the-badge" alt="Network">
  <img src="https://img.shields.io/badge/AI-8A2BE2?style=for-the-badge" alt="AI">
  <img src="https://img.shields.io/badge/AI_Agents-141414?style=for-the-badge&logo=openai&logoColor=00F5FF" alt="AI Agents">
  <img src="https://img.shields.io/badge/MCP-FF8C00?style=for-the-badge" alt="MCP">
  <img src="https://img.shields.io/badge/Automation-D1242F?style=for-the-badge" alt="Automation">
  <img src="https://img.shields.io/badge/Virtual_LAB-228B22?style=for-the-badge" alt="Virtual Lab">
</p>

<p align="center">
  <a href="https://youtube.com/@NetworkCoder"><img src="https://img.shields.io/badge/Tutorials-FF0000?style=for-the-badge&logo=youtube&logoColor=white" alt="YouTube"></a>
  <a href="https://www.linkedin.com/in/hadeek"><img src="https://img.shields.io/badge/Connect-0A66C2?style=for-the-badge&logo=linkedin&logoColor=white" alt="LinkedIn"></a>
  <a href="https://github.com/network-tocoder"><img src="https://img.shields.io/badge/Projects-181717?style=for-the-badge&logo=github&logoColor=white" alt="GitHub"></a>
</p>

---

## ğŸ“ What You'll Learn

This series takes you from zero to hero in network automation. Build a complete virtual lab in EVE-NG, automate firewalls, deploy NetBox for infrastructure management, and integrate everything with modern DevOps tools and AI.

---

## ğŸ“º Video Index

| # | Video | Topic | ğŸ¬ Watch |
|---|-------|-------|----------|
| 1 | [EVE-NG Installation](#video-1-eve-ng-installation--first-virtual-lab) | EVE-NG, Virtual Lab Setup | [â–¶ï¸ YouTube](https://www.youtube.com/watch?v=ABNOS7GypxA) |
| 2 | [Build Automation Environment](#video-2-build-automation-environment-inside-eve-ng) | Linux, Ansible, VS Code | [â–¶ï¸ YouTube](https://www.youtube.com/watch?v=NPq7AjCguBY) |
| 3 | [Git Workflow](#video-3-git-workflow-for-network-engineers) | Git, GitHub, Version Control | [â–¶ï¸ YouTube](https://www.youtube.com/watch?v=vykDi7PFeW0) |
| 4 | [Deploy FortiGate](#video-4-deploy-fortigate-firewall-on-eve-ng) | FortiGate, EVE-NG | [â–¶ï¸ YouTube](https://www.youtube.com/watch?v=8W9OJAP773s) |
| 5 | [FortiGate Ansible](#video-5-fortigate-firewall-using-ansible) | Ansible, FortiGate, Vault | [â–¶ï¸ YouTube](https://www.youtube.com/watch?v=3VL-JRIJT8M) |
| 6 | [FortiGate REST API](#video-6-fortigate-automation-using-rest-api) | REST API, Postman | [â–¶ï¸ YouTube](https://www.youtube.com/watch?v=Eqy4q9SsmtE) |
| 7 | [NetBox Docker](#video-7-netbox-installation-using-docker) | NetBox, Docker | [â–¶ï¸ YouTube](https://www.youtube.com/watch?v=OGQGly7NIFY) |
| 8 | [NetBox Dynamic Inventory](#video-8-netbox-dynamic-inventory---core-concepts-explained) | DIODE, ORB, Architecture | [â–¶ï¸ YouTube](https://www.youtube.com/watch?v=JZ-jDCT8mQY) |
| 9 | [NetBox Auto-Discovery](#video-9-netbox-auto-discovery---complete-setup-guide) | DIODE, ORB Agent, OAuth | [â–¶ï¸ YouTube](https://www.youtube.com/watch?v=DODzEsMTmKQ) |
| 10 | [pyATS + NetBox](#video-10-pyats--netbox-integration) | pyATS, Testing, NetBox | [â–¶ï¸ YouTube](https://www.youtube.com/watch?v=V_PmWxC2QDA) |
| 11 | [MCP Fundamentals](#video-11-mcp-fundamentals---quick-breakdown) | MCP, Architecture, FastMCP | [â–¶ï¸ YouTube](https://www.youtube.com/watch?v=DDQL5OQDLJU) |
| 12 | [NetBox + MCP Hands-On](#video-12-netbox--mcp-hands-on-setup) | Claude Code, Setup, Queries | [â–¶ï¸ YouTube](https://www.youtube.com/watch?v=YOUR_VIDEO_ID) |
| 13 | [Custom MCP Server](#video-13-custom-mcp-server) | FastMCP, Netmiko, SSH | ğŸ”œ Coming Soon |
| 14 | [Ansible + MCP Integration](#video-14-ansible--mcp-integration) | Ansible, MCP, Playbooks | ğŸ”œ Coming Soon |
| 15 | [pyATS + MCP Integration](#video-15-pyats--mcp-integration) | pyATS, MCP, Testing | ğŸ”œ Coming Soon |

---

## ğŸ› ï¸ Tech Stack

![EVE-NG](https://img.shields.io/badge/EVE--NG-00A98F?style=flat-square&logo=vmware&logoColor=white)
![Docker](https://img.shields.io/badge/Docker-2496ED?style=flat-square&logo=docker&logoColor=white)
![Ansible](https://img.shields.io/badge/Ansible-EE0000?style=flat-square&logo=ansible&logoColor=white)
![Python](https://img.shields.io/badge/Python-3776AB?style=flat-square&logo=python&logoColor=white)
![NetBox](https://img.shields.io/badge/NetBox-0078D4?style=flat-square&logo=buffer&logoColor=white)
![FortiGate](https://img.shields.io/badge/FortiGate-EE3124?style=flat-square&logo=fortinet&logoColor=white)
![Cisco](https://img.shields.io/badge/Cisco-1BA0D7?style=flat-square&logo=cisco&logoColor=white)

---

## Video 1: EVE-NG Installation & First Virtual Lab

[â–¶ï¸ Watch on YouTube](https://www.youtube.com/watch?v=ABNOS7GypxA)

### ğŸ“‹ Overview

Install EVE-NG on VMware Workstation and build your first virtual network topology.

### ğŸ¯ What You'll Learn

- Download and install EVE-NG Community Edition
- Configure VMware Workstation network settings
- Initial EVE-NG configuration
- Add network device images
- Create your first topology

### ğŸ’» Commands

<details>
<summary>1. VMware Network Configuration</summary>

```bash
# Open Virtual Network Editor
# Edit > Virtual Network Editor > Change Settings

# Configure VMnet0 - Bridge to physical adapter
# This allows EVE-NG to use your home network IP range
```

</details>

<details>
<summary>2. EVE-NG VM Settings</summary>

```bash
# Recommended VM Settings:
# - Processors: 2 processors x 2 cores = 4 vCPUs
# - Memory: 8GB minimum (16GB recommended)
# - Hard Disk: 80GB
# - Network Adapter: Bridged (VMnet0)
# - Guest OS: Linux > Ubuntu 64-bit
```

</details>

<details>
<summary>3. EVE-NG Initial Setup</summary>

```bash
# Default credentials after installation
# Username: root
# Password: eve

# Update EVE-NG
apt update && apt upgrade -y

# Fix permissions (run after adding images)
/opt/unetlab/wrappers/unl_wrapper -a fixpermissions
```

</details>

<details>
<summary>4. Key EVE-NG Directories</summary>

```bash
# Lab files location
/opt/unetlab/labs/

# QEMU images (routers, firewalls)
/opt/unetlab/addons/qemu/

# IOL images (Cisco IOS)
/opt/unetlab/addons/iol/bin/

# Docker images
/opt/unetlab/addons/docker/

# Running lab configurations
/opt/unetlab/tmp/
```

</details>

<details>
<summary>5. Add Network Device Images</summary>

```bash
# Upload images via WinSCP/SCP to appropriate directory
# Example: Cisco IOL images
cd /opt/unetlab/addons/iol/bin/

# After uploading, fix permissions
/opt/unetlab/wrappers/unl_wrapper -a fixpermissions

# Verify images
ls -la /opt/unetlab/addons/qemu/
ls -la /opt/unetlab/addons/iol/bin/
```

</details>

### ğŸ”— Resources

- [EVE-NG Official Website](https://www.eve-ng.net/)
- [EVE-NG Documentation](https://www.eve-ng.net/index.php/documentation/)

---

## Video 2: Build Automation Environment Inside EVE-NG

[â–¶ï¸ Watch on YouTube](https://www.youtube.com/watch?v=NPq7AjCguBY)

### ğŸ“‹ Overview

Deploy Linux node in EVE-NG, install Ansible, and integrate VS Code for professional development workflow.

### ğŸ¯ What You'll Learn

- Add Linux node to EVE-NG topology
- Install Python and Ansible
- Configure VS Code Remote SSH
- Set up virtual environment best practices

### ğŸ’» Commands

<details>
<summary>1. Download & Install Ubuntu Cloud Image</summary>

```bash
# On EVE-NG server - download Ubuntu cloud image
mkdir -p /tmp/ubuntu-download
cd /tmp/ubuntu-download

wget https://cloud-images.ubuntu.com/releases/22.04/release/ubuntu-22.04-server-cloudimg-amd64.img

# Rename to EVE-NG format
mv ubuntu-22.04-server-cloudimg-amd64.img virtioa.qcow2

# Move to EVE-NG directory
mkdir -p /opt/unetlab/addons/qemu/linux-ubuntu-22.04
mv virtioa.qcow2 /opt/unetlab/addons/qemu/linux-ubuntu-22.04/

# Fix permissions
/opt/unetlab/wrappers/unl_wrapper -a fixpermissions

# Verify installation
ls -la /opt/unetlab/addons/qemu/linux-ubuntu-22.04/
```

</details>

<details>
<summary>2. Linux Node Initial Setup</summary>

```bash
# Default credentials for EVE-NG Linux images
# Username: root
# Password: eve

# Update system
sudo apt update && sudo apt upgrade -y

# Install essential tools
sudo apt install -y python3 python3-pip python3-venv git curl wget nano vim
```

</details>

<details>
<summary>3. Create Python Virtual Environment</summary>

```bash
# Create virtual environment
python3 -m venv ~/ansible-venv

# Activate virtual environment
source ~/ansible-venv/bin/activate

# Upgrade pip
pip install --upgrade pip

# Create activation alias (add to ~/.bashrc)
echo 'alias netdev="source ~/ansible-venv/bin/activate"' >> ~/.bashrc
source ~/.bashrc

# Now you can use 'netdev' to activate
netdev
```

</details>

<details>
<summary>4. Install Ansible</summary>

```bash
# Activate virtual environment first
source ~/ansible-venv/bin/activate

# Install Ansible
pip install ansible

# Install additional useful packages
pip install paramiko netmiko napalm

# Verify installation
ansible --version
python3 --version
pip list
```

</details>

<details>
<summary>5. VS Code Remote SSH Setup</summary>

```bash
# On Linux node - Install OpenSSH Server
sudo apt install openssh-server -y

# Start and enable SSH service
sudo systemctl start ssh
sudo systemctl enable ssh

# Check SSH status
sudo systemctl status ssh

# Configure firewall (if enabled)
sudo ufw allow ssh

# Get IP address for VS Code connection
ip addr show
```

**In VS Code:**
1. Install "Remote - SSH" extension
2. Press `F1` > "Remote-SSH: Connect to Host"
3. Enter: `username@<linux-node-ip>`
4. Open folder: `/home/username/`
5. Install Python extension in remote environment

</details>

### ğŸ”— Resources

- [Ansible Documentation](https://docs.ansible.com/)
- [VS Code Remote SSH](https://code.visualstudio.com/docs/remote/ssh)

---

## Video 3: Git Workflow for Network Engineers

[â–¶ï¸ Watch on YouTube](https://www.youtube.com/watch?v=vykDi7PFeW0)

### ğŸ“‹ Overview

Complete Git workflow for network engineers - version control for Ansible projects.

### ğŸ¯ What You'll Learn

- Git fundamentals for network automation
- Create GitHub repository
- Push Ansible playbooks to GitHub
- Best practices for version control

### ğŸ’» Commands

<details>
<summary>1. Install Git</summary>

```bash
# Install Git
sudo apt install git -y

# Verify installation
git --version

# Configure Git (use your details)
git config --global user.name "Your Name"
git config --global user.email "your.email@example.com"

# Verify configuration
git config --list
```

</details>

<details>
<summary>2. Initialize Local Repository</summary>

```bash
# Navigate to your project directory
cd ~/ansible-projects

# Initialize Git repository
git init

# Check repository status
git status

# Create .gitignore file
cat << 'EOF' > .gitignore
# Python
__pycache__/
*.py[cod]
*.venv/
venv/

# Ansible
*.retry
*.log

# Sensitive files
inventory/hosts
group_vars/vault.yml
*vault*

# IDE
.vscode/
.idea/
EOF

# View .gitignore
cat .gitignore
```

</details>

<details>
<summary>3. Stage and Commit Files</summary>

```bash
# Add all files to staging
git add .

# Or add specific files
git add playbook.yml inventory/

# Check staged files
git status

# Commit with message
git commit -m "Initial commit: Ansible project structure"

# View commit history
git log
git log --oneline
```

</details>

<details>
<summary>4. Create GitHub Repository</summary>

```bash
# On GitHub.com:
# 1. Click "+" (top right) > "New repository"
# 2. Repository name: ansible-network-automation
# 3. Description: Network automation with Ansible
# 4. Choose: Private or Public
# 5. Do NOT initialize with README
# 6. Click "Create repository"
# 7. Copy the repository URL
```

</details>

<details>
<summary>5. Connect Local to GitHub</summary>

```bash
# Add remote repository (use HTTPS or SSH)
git remote add origin https://github.com/yourusername/ansible-network-automation.git

# Verify remote
git remote -v

# Push to GitHub
git push -u origin main

# Or if branch is named 'master'
git branch -M main
git push -u origin main
```

</details>

<details>
<summary>6. Daily Git Workflow</summary>

```bash
# Check current status
git status

# Pull latest changes (if working in team)
git pull

# Make changes to your files...

# Check what changed
git diff

# Stage changes
git add .

# Commit changes
git commit -m "Add VLAN configuration playbook"

# Push to GitHub
git push

# View commit history
git log --oneline --graph
```

</details>

<details>
<summary>7. GitHub SSH Authentication (Recommended)</summary>

```bash
# Generate SSH key
ssh-keygen -t ed25519 -C "your.email@example.com"
# Press Enter for default location
# Enter passphrase (optional)

# Copy SSH public key
cat ~/.ssh/id_ed25519.pub

# On GitHub.com:
# 1. Settings > SSH and GPG keys
# 2. Click "New SSH key"
# 3. Paste your public key
# 4. Click "Add SSH key"

# Test SSH connection
ssh -T git@github.com

# Change remote to SSH
git remote set-url origin git@github.com:yourusername/ansible-network-automation.git

# Verify
git remote -v
```

</details>

<details>
<summary>8. Branching Strategy</summary>

```bash
# Create new branch
git branch feature/new-playbook

# Switch to branch
git checkout feature/new-playbook

# Or create and switch in one command
git checkout -b feature/new-playbook

# List all branches
git branch

# Make changes and commit
git add .
git commit -m "Add new feature"

# Push branch to GitHub
git push origin feature/new-playbook

# Switch back to main
git checkout main

# Merge branch
git merge feature/new-playbook

# Delete branch
git branch -d feature/new-playbook
```

</details>

### ğŸ”— Resources

- [Git Documentation](https://git-scm.com/doc)
- [GitHub Guides](https://guides.github.com/)

---

## Video 4: Deploy FortiGate Firewall on EVE-NG

[â–¶ï¸ Watch on YouTube](https://www.youtube.com/watch?v=8W9OJAP773s)

### ğŸ“‹ Overview

Deploy FortiGate virtual firewall in EVE-NG for security automation testing.

### ğŸ¯ What You'll Learn

- Download FortiGate VM image
- Add FortiGate to EVE-NG
- Initial FortiGate configuration
- Network connectivity setup

### ğŸ’» Commands

<details>
<summary>1. Download FortiGate VM Image</summary>

```bash
# Visit: https://support.fortinet.com/
# Login with account (free trial available)
# Download: FortiGate-VM64-KVM (QCOW2 format)
# Version: Latest 7.x

# On your computer, upload to EVE-NG via SCP
scp FGT_VM64_KVM-v7.x.x-build.out root@<eve-ng-ip>:/tmp/
```

</details>

<details>
<summary>2. Install FortiGate in EVE-NG</summary>

```bash
# On EVE-NG server
cd /tmp

# Create FortiGate directory
mkdir -p /opt/unetlab/addons/qemu/fortigate-7.4.1

# Rename image
mv FGT_VM64_KVM-v7-build*.out /opt/unetlab/addons/qemu/fortigate-7.4.1/hda.qcow2

# Fix permissions
/opt/unetlab/wrappers/unl_wrapper -a fixpermissions

# Verify installation
ls -la /opt/unetlab/addons/qemu/fortigate-7.4.1/
```

</details>

<details>
<summary>3. FortiGate Initial Configuration</summary>

```bash
# Default credentials
# Username: admin
# Password: (blank - press Enter)

# Initial setup via console
# Set admin password
config system admin
    edit admin
        set password YourStrongPassword
    end

# Configure hostname
config system global
    set hostname FortiGate-VM
end

# Configure management interface
config system interface
    edit port1
        set mode static
        set ip 192.168.1.99/24
        set allowaccess ping https ssh http
    end

# Configure default gateway
config router static
    edit 1
        set gateway 192.168.1.1
        set device port1
    next
end

# Configure DNS
config system dns
    set primary 8.8.8.8
    set secondary 8.8.4.4
end

# Save configuration
execute save config
```

</details>

<details>
<summary>4. Verify Connectivity</summary>

```bash
# Check interface status
get system interface physical

# Test ping
execute ping 8.8.8.8

# Check routes
get router info routing-table all

# Access via GUI
# https://192.168.1.99
# Username: admin
# Password: YourStrongPassword
```

</details>

### ğŸ”— Resources

- [FortiGate Documentation](https://docs.fortinet.com/)
- [FortiGate Cookbook](https://docs.fortinet.com/product/fortigate)

---

## Video 5: FortiGate Firewall Using Ansible

[â–¶ï¸ Watch on YouTube](https://www.youtube.com/watch?v=3VL-JRIJT8M)

### ğŸ“‹ Overview

Automate FortiGate firewall configuration using Ansible with secure credential management.

### ğŸ¯ What You'll Learn

- Install FortiOS Ansible collection
- Create inventory for FortiGate
- Use Ansible Vault for credentials
- Write FortiGate automation playbooks

### ğŸ’» Commands

<details>
<summary>1. Install FortiOS Ansible Collection</summary>

```bash
# Activate virtual environment
source ~/ansible-venv/bin/activate

# Install FortiOS collection
ansible-galaxy collection install fortinet.fortios

# Verify installation
ansible-galaxy collection list | grep fortinet
```

</details>

<details>
<summary>2. Create Project Structure</summary>

```bash
# Create project directory
mkdir -p ~/ansible-projects/fortigate-automation
cd ~/ansible-projects/fortigate-automation

# Create directory structure
mkdir -p {inventory,group_vars,playbooks,roles}

# Create inventory file
cat << 'EOF' > inventory/hosts
[fortigates]
fortigate-vm ansible_host=192.168.1.99

[fortigates:vars]
ansible_connection=httpapi
ansible_network_os=fortinet.fortios.fortios
ansible_httpapi_use_ssl=yes
ansible_httpapi_validate_certs=no
ansible_httpapi_port=443
EOF

# View inventory
cat inventory/hosts
```

</details>

<details>
<summary>3. Secure Credentials with Ansible Vault</summary>

```bash
# Create vault password file
echo "YourVaultPassword" > .vault_pass

# Secure the password file
chmod 600 .vault_pass

# Add to .gitignore
echo ".vault_pass" >> .gitignore

# Create encrypted vault file
ansible-vault create group_vars/fortigates/vault.yml --vault-password-file .vault_pass

# Inside vault.yml, add:
---
vault_fortigate_username: admin
vault_fortigate_password: YourFortiGatePassword

# Save and exit (ESC :wq)

# Verify vault is encrypted
cat group_vars/fortigates/vault.yml

# Edit vault later
ansible-vault edit group_vars/fortigates/vault.yml --vault-password-file .vault_pass

# View vault content
ansible-vault view group_vars/fortigates/vault.yml --vault-password-file .vault_pass
```

</details>

<details>
<summary>4. Create Variables File</summary>

```bash
# Create non-sensitive variables
cat << 'EOF' > group_vars/fortigates/vars.yml
---
ansible_user: "{{ vault_fortigate_username }}"
ansible_password: "{{ vault_fortigate_password }}"
EOF

# View variables
cat group_vars/fortigates/vars.yml
```

</details>

<details>
<summary>5. Test Connectivity</summary>

```bash
# Create test playbook
cat << 'EOF' > playbooks/test_connection.yml
---
- name: Test FortiGate Connection
  hosts: fortigates
  gather_facts: no
  
  tasks:
    - name: Get system status
      fortinet.fortios.fortios_system_status:
        vdom: root
      register: system_status
      
    - name: Display FortiGate info
      debug:
        msg: 
          - "Hostname: {{ system_status.meta.results.hostname }}"
          - "Version: {{ system_status.meta.results.version }}"
          - "Serial: {{ system_status.meta.results.serial }}"
EOF

# Run test playbook
ansible-playbook -i inventory/hosts playbooks/test_connection.yml --vault-password-file .vault_pass
```

</details>

<details>
<summary>6. Configure Firewall Address Objects</summary>

```bash
# Create address objects playbook
cat << 'EOF' > playbooks/create_address_objects.yml
---
- name: Configure FortiGate Address Objects
  hosts: fortigates
  gather_facts: no
  
  tasks:
    - name: Create Server-Web address
      fortinet.fortios.fortios_firewall_address:
        vdom: root
        state: present
        firewall_address:
          name: "Server-Web"
          type: "ipmask"
          subnet: "10.0.1.10/32"
          comment: "Web Server"
      
    - name: Create Server-DB address
      fortinet.fortios.fortios_firewall_address:
        vdom: root
        state: present
        firewall_address:
          name: "Server-DB"
          type: "ipmask"
          subnet: "10.0.2.10/32"
          comment: "Database Server"
      
    - name: Create Network-LAN address
      fortinet.fortios.fortios_firewall_address:
        vdom: root
        state: present
        firewall_address:
          name: "Network-LAN"
          type: "ipmask"
          subnet: "192.168.1.0/24"
          comment: "Internal LAN"
EOF

# Run playbook
ansible-playbook -i inventory/hosts playbooks/create_address_objects.yml --vault-password-file .vault_pass
```

</details>

<details>
<summary>7. Configure Firewall Policies</summary>

```bash
# Create firewall policy playbook
cat << 'EOF' > playbooks/create_firewall_policy.yml
---
- name: Configure FortiGate Firewall Policies
  hosts: fortigates
  gather_facts: no
  
  tasks:
    - name: Allow LAN to Web Server
      fortinet.fortios.fortios_firewall_policy:
        vdom: root
        state: present
        firewall_policy:
          policyid: 10
          name: "Allow-LAN-to-Web"
          action: "accept"
          srcintf:
            - name: "port2"
          dstintf:
            - name: "port3"
          srcaddr:
            - name: "Network-LAN"
          dstaddr:
            - name: "Server-Web"
          service:
            - name: "HTTP"
            - name: "HTTPS"
          schedule: "always"
          nat: "disable"
          logtraffic: "all"
          comments: "Allow LAN to Web Server"
EOF

# Run playbook
ansible-playbook -i inventory/hosts playbooks/create_firewall_policy.yml --vault-password-file .vault_pass
```

</details>

<details>
<summary>8. Backup FortiGate Configuration</summary>

```bash
# Create backup playbook
cat << 'EOF' > playbooks/backup_config.yml
---
- name: Backup FortiGate Configuration
  hosts: fortigates
  gather_facts: no
  
  tasks:
    - name: Backup configuration
      fortinet.fortios.fortios_monitor:
        vdom: root
        selector: "system_config_backup"
        params:
          scope: "global"
      register: backup
      
    - name: Save backup to file
      copy:
        content: "{{ backup.meta }}"
        dest: "./backups/{{ inventory_hostname }}_{{ ansible_date_time.date }}.conf"
      delegate_to: localhost
      
    - name: Display backup location
      debug:
        msg: "Backup saved to: ./backups/{{ inventory_hostname }}_{{ ansible_date_time.date }}.conf"
EOF

# Create backup directory
mkdir -p backups

# Run backup playbook
ansible-playbook -i inventory/hosts playbooks/backup_config.yml --vault-password-file .vault_pass
```

</details>

### ğŸ”— Resources

- [FortiOS Ansible Collection](https://galaxy.ansible.com/fortinet/fortios)
- [Ansible Vault Documentation](https://docs.ansible.com/ansible/latest/user_guide/vault.html)

---

## Video 6: FortiGate Automation Using REST API

[â–¶ï¸ Watch on YouTube](https://www.youtube.com/watch?v=Eqy4q9SsmtE)

### ğŸ“‹ Overview

Automate FortiGate using REST API with Postman and VS Code.

### ğŸ¯ What You'll Learn

- FortiGate REST API fundamentals
- Test APIs with Postman
- Python automation with requests library
- GitHub workflow integration

### ğŸ’» Commands

<details>
<summary>1. Enable FortiGate API Access</summary>

```bash
# On FortiGate CLI or GUI
# CLI method:
config system api-user
    edit api-admin
        set accprofile super_admin
        set vdom root
        set api-key YourAPIKeyHere
        set comments "API access for automation"
    next
end

# Or via GUI:
# System > Administrators > Create New > REST API Admin
# Profile: super_admin
# Trusted Hosts: 0.0.0.0/0 (for testing - restrict in production)
# Copy the API key!
```

</details>

<details>
<summary>2. Test API with cURL</summary>

```bash
# Set variables
FORTIGATE_IP="192.168.1.99"
API_KEY="YourAPIKeyHere"

# Get system status
curl -k -X GET "https://${FORTIGATE_IP}/api/v2/monitor/system/status" \
  -H "Authorization: Bearer ${API_KEY}"

# Get firewall addresses
curl -k -X GET "https://${FORTIGATE_IP}/api/v2/cmdb/firewall/address" \
  -H "Authorization: Bearer ${API_KEY}"

# Get firewall policies
curl -k -X GET "https://${FORTIGATE_IP}/api/v2/cmdb/firewall/policy" \
  -H "Authorization: Bearer ${API_KEY}"
```

</details>

<details>
<summary>3. Install Postman</summary>

```bash
# Download Postman from: https://www.postman.com/downloads/

# Or install via snap (Linux)
sudo snap install postman

# Launch Postman
postman
```

**Postman Collection Setup:**
1. Create new collection: "FortiGate API"
2. Add environment variable: `base_url` = `https://192.168.1.99`
3. Add environment variable: `api_key` = `YourAPIKeyHere`
4. Set Authorization: Bearer Token = `{{api_key}}`

</details>

<details>
<summary>4. Python REST API Script</summary>

```bash
# Create Python script
cat << 'EOF' > fortigate_api.py
#!/usr/bin/env python3
import requests
import json
from urllib3.exceptions import InsecureRequestWarning

# Disable SSL warnings for self-signed certs
requests.packages.urllib3.disable_warnings(category=InsecureRequestWarning)

class FortiGateAPI:
    def __init__(self, host, api_key):
        self.host = host
        self.api_key = api_key
        self.base_url = f"https://{host}/api/v2"
        self.headers = {"Authorization": f"Bearer {api_key}"}
    
    def get_system_status(self):
        """Get FortiGate system status"""
        url = f"{self.base_url}/monitor/system/status"
        response = requests.get(url, headers=self.headers, verify=False)
        return response.json()
    
    def get_firewall_addresses(self):
        """Get all firewall address objects"""
        url = f"{self.base_url}/cmdb/firewall/address"
        response = requests.get(url, headers=self.headers, verify=False)
        return response.json()
    
    def create_firewall_address(self, name, subnet, comment=""):
        """Create firewall address object"""
        url = f"{self.base_url}/cmdb/firewall/address"
        data = {
            "name": name,
            "type": "ipmask",
            "subnet": subnet,
            "comment": comment
        }
        response = requests.post(url, headers=self.headers, 
                               json=data, verify=False)
        return response.json()
    
    def delete_firewall_address(self, name):
        """Delete firewall address object"""
        url = f"{self.base_url}/cmdb/firewall/address/{name}"
        response = requests.delete(url, headers=self.headers, verify=False)
        return response.json()

# Example usage
if __name__ == "__main__":
    # Configuration
    FORTIGATE_HOST = "192.168.1.99"
    API_KEY = "YourAPIKeyHere"
    
    # Create API instance
    fg = FortiGateAPI(FORTIGATE_HOST, API_KEY)
    
    # Get system status
    print("=== System Status ===")
    status = fg.get_system_status()
    print(json.dumps(status, indent=2))
    
    # Create address object
    print("\n=== Creating Address Object ===")
    result = fg.create_firewall_address(
        name="Test-Server",
        subnet="10.10.10.10/32",
        comment="Created via API"
    )
    print(json.dumps(result, indent=2))
    
    # Get all addresses
    print("\n=== All Address Objects ===")
    addresses = fg.get_firewall_addresses()
    print(json.dumps(addresses, indent=2))
EOF

# Make executable
chmod +x fortigate_api.py

# Run script
python3 fortigate_api.py
```

</details>

<details>
<summary>5. Install Required Python Libraries</summary>

```bash
# Activate virtual environment
source ~/ansible-venv/bin/activate

# Install requests library
pip install requests urllib3

# Create requirements.txt
cat << 'EOF' > requirements.txt
requests>=2.28.0
urllib3>=1.26.0
EOF

# Install from requirements
pip install -r requirements.txt
```

</details>

<details>
<summary>6. Advanced API Operations</summary>

```bash
# Create advanced API script
cat << 'EOF' > fortigate_bulk_operations.py
#!/usr/bin/env python3
import requests
import json
from urllib3.exceptions import InsecureRequestWarning

requests.packages.urllib3.disable_warnings(category=InsecureRequestWarning)

class FortiGateAPI:
    def __init__(self, host, api_key):
        self.host = host
        self.api_key = api_key
        self.base_url = f"https://{host}/api/v2"
        self.headers = {"Authorization": f"Bearer {api_key}"}
    
    def bulk_create_addresses(self, address_list):
        """Create multiple address objects"""
        results = []
        for addr in address_list:
            url = f"{self.base_url}/cmdb/firewall/address"
            response = requests.post(url, headers=self.headers, 
                                   json=addr, verify=False)
            results.append({
                "name": addr["name"],
                "status": response.status_code,
                "result": response.json()
            })
        return results
    
    def get_firewall_policies(self):
        """Get all firewall policies"""
        url = f"{self.base_url}/cmdb/firewall/policy"
        response = requests.get(url, headers=self.headers, verify=False)
        return response.json()
    
    def backup_configuration(self):
        """Backup full configuration"""
        url = f"{self.base_url}/monitor/system/config/backup"
        response = requests.get(url, headers=self.headers, verify=False)
        return response.content

# Example: Bulk create address objects
if __name__ == "__main__":
    FORTIGATE_HOST = "192.168.1.99"
    API_KEY = "YourAPIKeyHere"
    
    fg = FortiGateAPI(FORTIGATE_HOST, API_KEY)
    
    # Define addresses to create
    addresses = [
        {"name": "Server-Web-01", "type": "ipmask", "subnet": "10.0.1.10/32"},
        {"name": "Server-Web-02", "type": "ipmask", "subnet": "10.0.1.11/32"},
        {"name": "Server-DB-01", "type": "ipmask", "subnet": "10.0.2.10/32"},
        {"name": "Server-DB-02", "type": "ipmask", "subnet": "10.0.2.11/32"}
    ]
    
    # Bulk create
    print("Creating address objects...")
    results = fg.bulk_create_addresses(addresses)
    print(json.dumps(results, indent=2))
    
    # Backup configuration
    print("\nBacking up configuration...")
    backup = fg.backup_configuration()
    with open("fortigate_backup.conf", "wb") as f:
        f.write(backup)
    print("Backup saved to: fortigate_backup.conf")
EOF

chmod +x fortigate_bulk_operations.py
python3 fortigate_bulk_operations.py
```

</details>

### ğŸ”— Resources

- [FortiGate REST API Documentation](https://docs.fortinet.com/document/fortigate/7.4.0/rest-api-reference)
- [Postman](https://www.postman.com/)

---

## Video 7: NetBox Installation Using Docker

[â–¶ï¸ Watch on YouTube](https://www.youtube.com/watch?v=OGQGly7NIFY)

### ğŸ“‹ Overview

Install and configure NetBox using Docker Compose for network infrastructure management.

### ğŸ¯ What You'll Learn

- Deploy NetBox with Docker Compose
- Initial NetBox configuration
- Create sites, devices, and IP addresses
- NetBox data modeling best practices

### ğŸ’» Commands

<details>
<summary>1. Install Docker & Docker Compose</summary>

```bash
# Update system
sudo apt update && sudo apt upgrade -y

# Install Docker
sudo apt install -y docker.io docker-compose

# Add user to docker group
sudo usermod -aG docker $USER

# Log out and back in for group changes to take effect
# Verify
docker --version
docker-compose --version
```

</details>

<details>
<summary>2. Clone NetBox Docker Repository</summary>

```bash
# Create directory for NetBox
mkdir -p ~/netbox-discovery
cd ~/netbox-discovery

# Clone official NetBox Docker repository
git clone -b release https://github.com/netbox-community/netbox-docker.git
cd netbox-docker

# Verify files
ls -la
```

</details>

<details>
<summary>3. Configure NetBox</summary>

```bash
# Copy example configuration
cp docker-compose.override.yml.example docker-compose.override.yml

# Generate secret key
SECRET_KEY=$(python3 -c 'import secrets; print(secrets.token_urlsafe(50))')
echo "SECRET_KEY=$SECRET_KEY"

# Create environment file
cat << EOF > .env
SUPERUSER_EMAIL=admin@example.com
SUPERUSER_PASSWORD=admin
SUPERUSER_API_TOKEN=$(python3 -c 'import secrets; print(secrets.token_hex(20))')
SECRET_KEY=$SECRET_KEY
EOF

# View configuration
cat .env
```

</details>

<details>
<summary>4. Start NetBox</summary>

```bash
# Pull Docker images
docker-compose pull

# Start NetBox
docker-compose up -d

# Check container status
docker-compose ps

# View logs
docker-compose logs -f netbox

# Wait for startup (about 2 minutes)
# Press Ctrl+C to stop following logs
```

</details>

<details>
<summary>5. Access NetBox Web UI</summary>

```bash
# Get NetBox IP
ip addr show

# Access via browser:
# http://<your-ip>:8000

# Default credentials:
# Username: admin
# Password: admin

# âš ï¸ Change password after first login!
```

</details>

<details>
<summary>6. NetBox Initial Setup</summary>

**In NetBox UI:**

1. **Create Site:**
   - Organization > Sites > Add
   - Name: HQ-DataCenter
   - Status: Active

2. **Create Device Role:**
   - Devices > Device Roles > Add
   - Name: Router
   - Color: Blue

3. **Create Manufacturer:**
   - Devices > Manufacturers > Add
   - Name: Cisco

4. **Create Device Type:**
   - Devices > Device Types > Add
   - Manufacturer: Cisco
   - Model: CSR1000v

5. **Create Device:**
   - Devices > Devices > Add
   - Name: vIOS-R1
   - Device Role: Router
   - Device Type: Cisco CSR1000v
   - Site: HQ-DataCenter
   - Status: Active

</details>

<details>
<summary>7. NetBox CLI Commands</summary>

```bash
# Enter NetBox container
docker-compose exec netbox bash

# Inside container - Django shell
python manage.py shell

# Create superuser
python manage.py createsuperuser

# Collect static files
python manage.py collectstatic --no-input

# Run migrations
python manage.py migrate

# Exit container
exit
```

</details>

<details>
<summary>8. NetBox Backup</summary>

```bash
# Backup NetBox database
docker-compose exec -T postgres pg_dump -U netbox netbox > netbox_backup_$(date +%Y%m%d).sql

# Backup media files
docker-compose exec netbox tar -czf /tmp/media_backup.tar.gz /opt/netbox/netbox/media
docker cp netbox-docker_netbox_1:/tmp/media_backup.tar.gz ./media_backup_$(date +%Y%m%d).tar.gz

# List backups
ls -lh netbox_backup* media_backup*
```

</details>

### ğŸ”— Resources

- [NetBox Documentation](https://docs.netbox.dev/)
- [NetBox Docker GitHub](https://github.com/netbox-community/netbox-docker)

---

## Video 8: NetBox Dynamic Inventory - Core Concepts Explained

[â–¶ï¸ Watch on YouTube](https://www.youtube.com/watch?v=JZ-jDCT8mQY)

### ğŸ“‹ Overview

Understand the architecture of NetBox Auto-Discovery using DIODE and ORB Agent.

### ğŸ¯ What You'll Learn

- NetBox Auto-Discovery architecture
- DIODE Server components
- ORB Agent functionality
- Data flow and OAuth authentication

### ğŸ—ï¸ Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ORB Agent     â”‚â”€â”€â”€â”€â–¶â”‚  DIODE Server   â”‚â”€â”€â”€â”€â–¶â”‚ NetBox Plugin   â”‚
â”‚  (Discovery)    â”‚     â”‚  (Processing)   â”‚     â”‚   (Storage)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                        â”‚                        â”‚
       â”‚                        â”‚                        â”‚
       â–¼                        â–¼                        â–¼
  SSH/SNMP               PostgreSQL                  NetBox DB
  Devices                   Hydra                     
                          OAuth 2.0
```

### ğŸ“ Key Components

<details>
<summary>1. ORB Agent - Discovery Engine</summary>

**Purpose:** Discovers network devices and collects configuration data

**How it works:**
- Runs as Docker container
- Uses NAPALM drivers for multi-vendor support
- Connects to devices via SSH/SNMP/NETCONF
- Scheduled discovery (configurable interval)
- Sends data to DIODE Server

**Supported Vendors:**
- Cisco (IOS, IOS-XE, NXOS, IOS-XR)
- Juniper (JunOS)
- Arista (EOS)
- And more via NAPALM

</details>

<details>
<summary>2. DIODE Server - Processing Layer</summary>

**Purpose:** Processes and validates network data

**Components:**
- **Ingester**: Receives data from ORB Agent
- **PostgreSQL**: Stores raw network data
- **Reconciler**: Creates NetBox changesets
- **Hydra**: OAuth 2.0 authorization server
- **Nginx**: Reverse proxy

**Data Flow:**
```
ORB Agent â†’ Ingester â†’ PostgreSQL â†’ Reconciler â†’ NetBox
                           â†“
                        Hydra (Auth)
```

</details>

<details>
<summary>3. NetBox DIODE Plugin - Integration</summary>

**Purpose:** Receives data from DIODE and updates NetBox

**Functions:**
- Pulls changesets from DIODE API
- Creates/updates devices
- Manages interfaces and IP addresses
- Handles OAuth authentication
- Provides UI for credential management

</details>

<details>
<summary>4. OAuth 2.0 Authentication Flow</summary>

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ORB Agent  â”‚                    â”‚   Hydra     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                  â”‚
       â”‚  1. Request Token                â”‚
       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
       â”‚                                  â”‚
       â”‚  2. Validate Credentials         â”‚
       â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
       â”‚     Return JWT Token             â”‚
       â”‚                                  â”‚
       â”‚  3. Send Data + Token            â”‚
       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
       â”‚                                  â”‚
       â”‚  4. Verify Token                 â”‚
       â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
       â”‚     Accept Data                  â”‚
       â”‚                                  â”‚
```

**Three OAuth Clients:**
1. `orb-agent` - ORB Agent â†’ DIODE
2. `netbox-to-diode` - NetBox Plugin â†’ DIODE
3. `diode-to-netbox` - DIODE â†’ NetBox (future use)

</details>

### ğŸ”— Resources

- [DIODE GitHub](https://github.com/netboxlabs/diode)
- [ORB Agent GitHub](https://github.com/netboxlabs/orb-agent)
- [NetBox DIODE Plugin](https://github.com/netboxlabs/netbox-diode-plugin)

---

## Video 9: NetBox Auto-Discovery - Complete Setup Guide

[â–¶ï¸ Watch on YouTube](https://www.youtube.com/watch?v=DODzEsMTmKQ)

### ğŸ“‹ Overview

Complete step-by-step setup of NetBox Auto-Discovery with DIODE Server and ORB Agent.

### ğŸ¯ What You'll Learn

- Deploy DIODE Server with Docker
- Install NetBox DIODE Plugin
- Configure ORB Agent
- Troubleshoot common issues
- Live auto-discovery demonstration

### ğŸ’» Commands

<details>
<summary>1. Deploy DIODE Server</summary>

```bash
# Create directory for DIODE
mkdir -p ~/netbox-discovery/diode
cd ~/netbox-discovery/diode

# Download DIODE quick-start script
curl -o diode-quickstart.sh https://raw.githubusercontent.com/netboxlabs/diode/main/diode-quickstart.sh

# Make executable
chmod +x diode-quickstart.sh

# Run quick-start (replace with your NetBox URL)
./diode-quickstart.sh --netbox-url http://192.168.1.120:8000

# This script will:
# - Download docker-compose.yml
# - Create .env file
# - Generate OAuth credentials
# - Start all DIODE services

# View generated OAuth credentials
cat oauth2/client/client-credentials.json

# Start DIODE services
docker-compose up -d

# Check status
docker-compose ps
```

</details>

<details>
<summary>2. Install NetBox DIODE Plugin</summary>

```bash
# Navigate to NetBox directory
cd ~/netbox-docker

# Enter NetBox container as root
docker-compose exec -u root netbox bash

# Inside container - Update package list
apt update

# Install pip (if not already installed)
apt install -y python3-pip

# Install NetBox DIODE plugin
pip3 install --target=/opt/netbox/venv/lib/python3.12/site-packages \
  --break-system-packages \
  netboxlabs-diode-netbox-plugin

# Verify installation
ls -la /opt/netbox/venv/lib/python3.12/site-packages/ | grep -i diode

# Test import
/opt/netbox/venv/bin/python3 -c "import netbox_diode_plugin; print('Plugin installed successfully')"

# Exit container
exit

# Commit the container to make plugin permanent
docker commit netbox-docker-netbox-1 netbox-with-diode:latest

# Update docker-compose.override.yml to use new image
cat << 'EOF' >> docker-compose.override.yml
services:
  netbox:
    image: netbox-with-diode:latest
EOF
```

</details>

<details>
<summary>3. Configure NetBox DIODE Plugin</summary>

```bash
# Edit NetBox plugins configuration
cd ~/netbox-docker
nano configuration/plugins.py

# Add at the end of the file:
PLUGINS = [
    'netbox_diode_plugin',
]

PLUGINS_CONFIG = {
    'netbox_diode_plugin': {
        'diode_target_override': 'grpc://192.168.1.120:8080/diode',
        'netbox_to_diode_client_secret': 'YOUR_SECRET_FROM_CLIENT_CREDENTIALS_JSON',
        'hydra_admin_url': 'http://diode-hydra-1:4445',
    }
}

# Save and exit (Ctrl+O, Enter, Ctrl+X)

# Get the actual secret from DIODE credentials
cd ~/netbox-discovery/diode
cat oauth2/client/client-credentials.json | grep -A 3 "netbox-to-diode"

# Copy the client_secret value and update plugins.py

# Restart NetBox
cd ~/netbox-docker
docker-compose restart netbox netbox-worker

# Run migrations
docker-compose exec netbox python /opt/netbox/netbox/manage.py migrate

# Restart again
docker-compose restart netbox netbox-worker
```

</details>

<details>
<summary>4. Fix Network Connectivity (Critical!)</summary>

```bash
# Check if NetBox and DIODE can communicate
cd ~/netbox-docker
docker-compose exec netbox hostname -i
# Note the IP (e.g., 172.18.0.5)

cd ~/netbox-discovery/diode
docker-compose exec hydra hostname -i
# Note the IP (e.g., 172.19.0.3)

# If IPs are on different subnets, add network configuration
# Edit DIODE docker-compose.yml
nano docker-compose.yml

# Add to the BOTTOM of the file:
networks:
  default:
    external: true
    name: netbox-docker_default

# Save and exit (Ctrl+O, Enter, Ctrl+X)

# Restart DIODE services
docker-compose down
docker-compose up -d

# Verify connectivity
cd ~/netbox-docker
docker-compose exec netbox curl http://diode-hydra-1:4445/health/ready
# Should return: {"status":"ok"}
```

</details>

<details>
<summary>5. Deploy ORB Agent</summary>

```bash
# Create directory for ORB Agent
mkdir -p ~/netbox-discovery/orb-agent
cd ~/netbox-discovery/orb-agent

# Create config.yaml (use OAuth credentials from NetBox UI)
# First, create OAuth credentials in NetBox:
# NetBox UI > Plugins > DIODE > Client Credentials > Add

# Create config.yaml
cat << 'EOF' > config.yaml
discovery:
  device_credentials:
    - username: cisco
      password: cisco
      driver: ios
  interfaces:
    enabled: true
  mac_addresses:
    enabled: true
  ip_addresses:
    enabled: true
  vlans:
    enabled: true
  
devices:
  - hostname: 192.168.1.10
    driver: ios
    
  - hostname: 192.168.1.11
    driver: ios
    
  - hostname: 192.168.1.12
    driver: ios

oauth:
  client_id: your-client-id-from-netbox
  client_secret: your-client-secret-from-netbox
  token_url: http://192.168.1.120:8080/oauth2/token

diode:
  target: 192.168.1.120:8080
  
schedule:
  interval: 900  # 15 minutes
EOF

# Create docker-compose.yml for ORB Agent
cat << 'EOF' > docker-compose.yml
services:
  orb-agent:
    image: netboxlabs/orb-agent:latest
    container_name: orb-agent
    volumes:
      - /home/user/netbox-discovery/orb-agent/config.yaml:/app/config.yaml
    restart: unless-stopped
EOF

# IMPORTANT: Update path to absolute path
# Replace /home/user with your actual home directory path

# Start ORB Agent
docker-compose up -d

# Check logs
docker logs -f orb-agent
```

</details>

<details>
<summary>6. Verify Auto-Discovery</summary>

```bash
# Check ORB Agent logs
cd ~/netbox-discovery/orb-agent
docker logs orb-agent | grep "Successful ingestion"

# Check DIODE ingester logs
cd ~/netbox-discovery/diode
docker-compose logs diode-ingester | grep -i "success"

# Check DIODE reconciler logs
docker-compose logs diode-reconciler | grep "applied successfully"

# Check NetBox UI
# Navigate to: Devices > Devices
# You should see discovered devices!
```

</details>

<details>
<summary>7. Troubleshooting Commands</summary>

```bash
# Check all container status
cd ~/netbox-docker && docker-compose ps
cd ~/netbox-discovery/diode && docker-compose ps
cd ~/netbox-discovery/orb-agent && docker-compose ps

# Check NetBox plugin configuration
cd ~/netbox-docker
docker-compose exec netbox python /opt/netbox/netbox/manage.py shell
>>> from django.conf import settings
>>> print(settings.PLUGINS_CONFIG.get('netbox_diode_plugin'))
>>> exit()

# List OAuth clients in Hydra
cd ~/netbox-discovery/diode
docker-compose exec hydra hydra list clients --endpoint http://localhost:4445

# Test OAuth token generation
curl -X POST http://192.168.1.120:8080/oauth2/token \
  -d "grant_type=client_credentials" \
  -d "client_id=YOUR_CLIENT_ID" \
  -d "client_secret=YOUR_CLIENT_SECRET"

# Check DIODE API health
curl http://192.168.1.120:8080/health

# Restart all services
cd ~/netbox-docker && docker-compose restart
cd ~/netbox-discovery/diode && docker-compose restart
cd ~/netbox-discovery/orb-agent && docker-compose restart
```

</details>

### ğŸš¨ Common Issues & Solutions

<details>
<summary>âŒ Error: "Missing netbox to diode client secret"</summary>

**Screenshot:**

<p align="center">
  <img src="assets/error-missing-client-secret.png" alt="Missing Client Secret Error" width="600">
</p>

**Error Message:**
```
Please update the plugin configuration to access this feature. 
Missing netbox to diode client secret.
```

**Root Cause:**
The NetBox DIODE Plugin configuration is missing or incorrectly configured with the OAuth client secret parameter.

**Why This Happens:**
1. âŒ Incorrect parameter name used in `plugins.py` (`diode_client_secret` instead of `netbox_to_diode_client_secret`)
2. âŒ Plugin configuration not updated after initial installation
3. âŒ NetBox services not restarted after configuration changes
4. âŒ Client secret doesn't match the value in DIODE's `client-credentials.json`

---

**âœ… STEP-BY-STEP FIX:**

**1. Verify DIODE has the Client Credentials**

```bash
# Navigate to DIODE directory
cd ~/netbox-discovery/diode

# Check if client credentials file exists
cat oauth2/client/client-credentials.json
```

**Expected output:**
```json
[
  {
    "client_id": "diode-ingest",
    "client_secret": "tcgnPFpZ3qVtxyqR+sGXIexpxAk8wul2S8yu7Duans=",
    "grant_types": ["client_credentials"],
    "scope": "diode:ingest"
  },
  {
    "client_id": "netbox-to-diode",
    "client_secret": "GdS63SRQ4I0G15I0V35uQYD7V+qnNUTjZCCD10yQvQ=",
    "grant_types": ["client_credentials"],
    "scope": "diode:read diode:write"
  },
  {
    "client_id": "diode-to-netbox",
    "client_secret": "NypFsBMV1rQTRDX5jO7Utez57DwF503gk8e2QKADLU=",
    "grant_types": ["client_credentials"],
    "scope": "netbox:read netbox:write"
  }
]
```

**âœ… Copy the `netbox-to-diode` client_secret value - you'll need this!**

---

**2. Verify Hydra Has the Client**

```bash
# Check Hydra container is running
cd ~/netbox-discovery/diode
docker-compose ps hydra

# List all OAuth clients in Hydra
docker-compose exec hydra hydra list clients --endpoint http://localhost:4445
```

**Expected output should include:**
```
CLIENT ID                    GRANT TYPES              RESPONSE TYPES
netbox-to-diode              client_credentials       token
diode-to-netbox              client_credentials       token
diode-ingest                 client_credentials       token
```

**âœ… If you see `netbox-to-diode`, the client exists in Hydra**

---

**3. Check NetBox Plugin Configuration**

```bash
# Navigate to NetBox directory
cd ~/netbox-docker

# Check the plugins configuration file
cat configuration/plugins.py | grep -A 10 "netbox_diode_plugin"
```

**âŒ WRONG Configuration (causes error):**
```python
PLUGINS_CONFIG = {
    'netbox_diode_plugin': {
        'diode_target_override': 'grpc://192.168.1.20:8080/diode',
        'diode_client_id': 'netbox-to-diode',           # âŒ Plugin doesn't use this
        'diode_client_secret': 'GdS63SRQ4I0G...',       # âŒ WRONG parameter name
    }
}
```

**âœ… CORRECT Configuration:**
```python
PLUGINS_CONFIG = {
    'netbox_diode_plugin': {
        'diode_target_override': 'grpc://192.168.1.20:8080/diode',
        'netbox_to_diode_client_secret': 'GdS63SRQ4I0G15I0V35uQYD7V+qnNUTjZCCD10yQvQ=',  # âœ… CORRECT
        'hydra_admin_url': 'http://diode-hydra-1:4445',  # âœ… REQUIRED
    }
}
```

**ğŸ”‘ Key Differences:**
1. âŒ Remove `diode_client_id` - plugin doesn't use this parameter
2. âœ… Change `diode_client_secret` â†’ `netbox_to_diode_client_secret`
3. âœ… Add `hydra_admin_url` parameter (required for plugin to function)

---

**4. Update NetBox Configuration**

```bash
cd ~/netbox-docker

# Edit the plugins configuration
nano configuration/plugins.py
```

**Update to the CORRECT configuration:**

```python
PLUGINS = [
    'netbox_diode_plugin',
]

PLUGINS_CONFIG = {
    'netbox_diode_plugin': {
        'diode_target_override': 'grpc://192.168.1.20:8080/diode',
        'netbox_to_diode_client_secret': 'GdS63SRQ4I0G15I0V35uQYD7V+qnNUTjZCCD10yQvQ=',  # Use YOUR actual secret
        'hydra_admin_url': 'http://diode-hydra-1:4445',
    }
}
```

**ğŸ“ Replace the secret with YOUR actual value from `client-credentials.json`**

**Save:** `Ctrl+O`, `Enter`, `Ctrl+X`

---

**5. Restart NetBox Services**

```bash
cd ~/netbox-docker

# Restart NetBox and NetBox worker
docker-compose restart netbox netbox-worker

# Wait 30 seconds for services to fully restart
sleep 30

# Check if services are running
docker-compose ps
```

**Expected:** Both `netbox` and `netbox-worker` should show status "Up"

---

**6. Verify Configuration Was Applied**

```bash
# Enter NetBox container Python shell
docker-compose exec netbox python /opt/netbox/netbox/manage.py shell
```

**Inside Python shell, run:**
```python
from django.conf import settings
config = settings.PLUGINS_CONFIG.get('netbox_diode_plugin')
print(config)
```

**Expected output:**
```python
{
    'diode_target_override': 'grpc://192.168.1.20:8080/diode',
    'netbox_to_diode_client_secret': 'GdS63SRQ4I0G15I0V35uQYD7V+qnNUTjZCCD10yQvQ=',
    'hydra_admin_url': 'http://diode-hydra-1:4445'
}
```

**âœ… Verify `netbox_to_diode_client_secret` is NOT `None`**

**Exit Python shell:** `exit()`

---

**7. Test NetBox UI**

1. **Open browser:** `http://192.168.1.20:8000`
2. **Login** as admin
3. **Navigate to:** Plugins â†’ DIODE â†’ Client Credentials
4. **Click:** "+ Add a Credential"

**âœ… The error should be GONE!**

---

**ğŸ“‹ Complete Verification Checklist:**

```bash
# Run all these commands to verify everything:

# 1. Check DIODE credentials file exists
cat ~/netbox-discovery/diode/oauth2/client/client-credentials.json

# 2. Check Hydra has the client
cd ~/netbox-discovery/diode
docker-compose exec hydra hydra list clients --endpoint http://localhost:4445

# 3. Check NetBox plugin config syntax
cd ~/netbox-docker
grep -A 5 "netbox_diode_plugin" configuration/plugins.py

# 4. Verify NetBox can reach Hydra
docker-compose exec netbox curl http://diode-hydra-1:4445/health/ready
# Should return: {"status":"ok"}

# 5. Check NetBox logs for plugin errors
docker-compose logs netbox | grep -i diode | tail -20
```

---

**ğŸ¯ Quick Fix Summary:**

If you see the "Missing netbox to diode client secret" error:

```bash
# 1. Get the secret from DIODE
cd ~/netbox-discovery/diode
cat oauth2/client/client-credentials.json | grep -A 3 "netbox-to-diode"

# 2. Update NetBox config with CORRECT parameter name
cd ~/netbox-docker
nano configuration/plugins.py

# Make sure it says:
# 'netbox_to_diode_client_secret': 'YOUR_SECRET'
# NOT: 'diode_client_secret'

# And includes:
# 'hydra_admin_url': 'http://diode-hydra-1:4445'

# 3. Restart NetBox
docker-compose restart netbox netbox-worker

# 4. Wait 30 seconds and test
sleep 30
# Open browser and check Plugins > DIODE > Client Credentials
```

---

**Additional Notes:**

- The plugin expects the parameter name `netbox_to_diode_client_secret` (not `diode_client_secret`)
- The `hydra_admin_url` parameter is required for the plugin to manage OAuth clients
- Client ID is hardcoded as `netbox-to-diode` in the plugin - no need to specify it
- Ensure NetBox and DIODE containers are on the same Docker network for connectivity

**This configuration error is one of the most common issues during DIODE plugin setup. Following these exact steps will resolve it!**

</details>

<details>
<summary>Issue 2: Network Connectivity - "Could not resolve host"</summary>

**Solution:**
```bash
cd ~/netbox-discovery/diode
nano docker-compose.yml

# Add to bottom:
networks:
  default:
    external: true
    name: netbox-docker_default

# Restart
docker-compose down && docker-compose up -d
```

</details>

<details>
<summary>Issue 3: ORB Agent Config Not Found</summary>

**Solution:**
```bash
# Use absolute path in docker-compose.yml
volumes:
  - /home/username/netbox-discovery/orb-agent/config.yaml:/app/config.yaml

# Not relative path like:
# - ./config.yaml:/app/config.yaml
```

</details>

### ğŸ”— Resources

- [DIODE Quick Start Guide](https://github.com/netboxlabs/diode)
- [ORB Agent Documentation](https://github.com/netboxlabs/orb-agent)
- [NetBox DIODE Plugin](https://github.com/netboxlabs/netbox-diode-plugin)

---

## Video 10: pyATS + NetBox Integration

[â–¶ï¸ Watch on YouTube](https://www.youtube.com/watch?v=V_PmWxC2QDA)

### ğŸ“‹ Overview

Integrate Cisco pyATS testing framework with NetBox for automated network validation.

### ğŸ¯ What You'll Learn

- Install and configure pyATS
- Create testbed from NetBox data
- Run automated network tests
- Generate test reports

### ğŸ’» Commands

<details>
<summary>1. Install pyATS and Genie</summary>

```bash
# Activate virtual environment
source ~/ansible-venv/bin/activate

# Install pyATS
pip install pyats[full]

# Install Genie
pip install genie

# Verify installation
pyats version
genie --version
```

</details>

<details>
<summary>2. Create pyATS Testbed</summary>

```bash
# Create testbed directory
mkdir -p ~/pyats-netbox && cd ~/pyats-netbox

# Create testbed.yaml
cat << 'EOF' > testbed.yaml
testbed:
  name: Network_Lab
  credentials:
    default:
      username: cisco
      password: cisco

devices:
  vIOS-R1:
    os: ios
    type: router
    connections:
      cli:
        protocol: ssh
        ip: 192.168.1.10
        
  vIOS-R2:
    os: ios
    type: router
    connections:
      cli:
        protocol: ssh
        ip: 192.168.1.11
        
  vIOS-R3:
    os: ios
    type: router
    connections:
      cli:
        protocol: ssh
        ip: 192.168.1.12
EOF

# Verify testbed
pyats validate testbed testbed.yaml
```

</details>

<details>
<summary>3. Test Device Connectivity</summary>

```bash
# Connect to device
pyats shell --testbed-file testbed.yaml

# Inside pyATS shell
>>> devices.vIOS-R1.connect()
>>> devices.vIOS-R1.execute('show version')
>>> devices.vIOS-R1.disconnect()
>>> exit()
```

</details>

<details>
<summary>4. Parse Show Commands</summary>

```bash
# Create parser script
cat << 'EOF' > parse_devices.py
#!/usr/bin/env python3
from pyats import topology
from genie.conf import Genie

# Load testbed
testbed = topology.loader.load('testbed.yaml')

# Connect to device
device = testbed.devices['vIOS-R1']
device.connect()

# Parse show version
output = device.parse('show version')
print(f"Hostname: {output['version']['hostname']}")
print(f"Version: {output['version']['version']}")
print(f"Uptime: {output['version']['uptime']}")

# Parse show interfaces
interfaces = device.parse('show interfaces')
for intf in interfaces['interfaces']:
    print(f"Interface: {intf}")
    print(f"  Status: {interfaces['interfaces'][intf]['oper_status']}")

device.disconnect()
EOF

chmod +x parse_devices.py
python3 parse_devices.py
```

</details>

<details>
<summary>5. Learn Device Features</summary>

```bash
# Learn interface configuration
pyats learn interface --testbed testbed.yaml --device vIOS-R1 --output interface_state/

# Learn routing table
pyats learn routing --testbed testbed.yaml --device vIOS-R1 --output routing_state/

# Learn OSPF
pyats learn ospf --testbed testbed.yaml --device vIOS-R1 --output ospf_state/

# Learn all features
pyats learn all --testbed testbed.yaml --output all_features/
```

</details>

<details>
<summary>6. Create Test Script</summary>

```bash
# Create test script
cat << 'EOF' > test_network.py
#!/usr/bin/env python3
from pyats import aetest
from genie.testbed import load

class CommonSetup(aetest.CommonSetup):
    @aetest.subsection
    def connect_to_devices(self, testbed):
        for device in testbed.devices.values():
            device.connect()

class InterfaceTest(aetest.Testcase):
    @aetest.setup
    def setup(self, testbed):
        self.device = testbed.devices['vIOS-R1']
    
    @aetest.test
    def test_interfaces_up(self):
        output = self.device.parse('show interfaces')
        failed_interfaces = []
        
        for intf in output['interfaces']:
            status = output['interfaces'][intf]['oper_status']
            if status != 'up':
                failed_interfaces.append(intf)
        
        if failed_interfaces:
            self.failed(f"Interfaces down: {failed_interfaces}")
        else:
            self.passed("All interfaces are up")

class CommonCleanup(aetest.CommonCleanup):
    @aetest.subsection
    def disconnect_from_devices(self, testbed):
        for device in testbed.devices.values():
            device.disconnect()

if __name__ == '__main__':
    import argparse
    from pyats.topology import loader
    
    parser = argparse.ArgumentParser()
    parser.add_argument('--testbed', dest='testbed')
    args, unknown = parser.parse_known_args()
    
    testbed = loader.load(args.testbed)
    aetest.main(testbed=testbed)
EOF

chmod +x test_network.py
python3 test_network.py --testbed testbed.yaml
```

</details>

<details>
<summary>7. Compare Network States</summary>

```bash
# Learn "before" state
pyats learn interface --testbed testbed.yaml --output before/

# Make changes on devices...

# Learn "after" state
pyats learn interface --testbed testbed.yaml --output after/

# Compare states
pyats diff before/ after/
```

</details>

<details>
<summary>8. Integration with NetBox</summary>

```bash
# Create script to sync pyATS results to NetBox
cat << 'EOF' > sync_to_netbox.py
#!/usr/bin/env python3
import requests
import json
from pyats import topology

# NetBox configuration
NETBOX_URL = "http://192.168.1.120:8000"
NETBOX_TOKEN = "your-netbox-api-token"
headers = {
    "Authorization": f"Token {NETBOX_TOKEN}",
    "Content-Type": "application/json"
}

# Load testbed
testbed = topology.loader.load('testbed.yaml')

# Connect and collect data
device = testbed.devices['vIOS-R1']
device.connect()

# Parse interfaces
interfaces = device.parse('show interfaces')

# Update NetBox
for intf_name in interfaces['interfaces']:
    intf_data = interfaces['interfaces'][intf_name]
    
    # Create/update interface in NetBox
    data = {
        "name": intf_name,
        "type": "other",
        "enabled": intf_data['enabled'],
        "mtu": intf_data.get('mtu', 1500),
        "description": intf_data.get('description', '')
    }
    
    # API call to NetBox
    response = requests.post(
        f"{NETBOX_URL}/api/dcim/interfaces/",
        headers=headers,
        json=data
    )
    
    print(f"Updated interface: {intf_name} - Status: {response.status_code}")

device.disconnect()
EOF

chmod +x sync_to_netbox.py
python3 sync_to_netbox.py
```

</details>

<details>
<summary>9. Automated Testing with Job File</summary>

```bash
# Create job file
cat << 'EOF' > network_test_job.py
import os
from pyats.easypy import run

def main(runtime):
    """Main job execution"""
    
    # Run test script
    run(
        testscript='test_network.py',
        runtime=runtime,
        taskid='InterfaceTests'
    )
EOF

# Run job
pyats run job network_test_job.py --testbed-file testbed.yaml

# View results
# Results are in: ./archive/
ls -la archive/
```

</details>

### ğŸ”— Resources

- [pyATS Documentation](https://developer.cisco.com/docs/pyats/)
- [Genie Documentation](https://developer.cisco.com/docs/genie-docs/)
- [pyATS GitHub](https://github.com/CiscoTestAutomation/pyats)

---

## Video 11: MCP Fundamentals - Quick Breakdown

[â–¶ï¸ Watch on YouTube](https://www.youtube.com/watch?v=DDQL5OQDLJU)

### ğŸ“‹ Overview

Understanding Model Context Protocol (MCP) - the universal standard that connects AI assistants to external tools. This video covers theory and concepts only - hands-on setup is in Video 12.

### ğŸ¯ What You'll Learn

- What is MCP and why it matters
- MCP architecture (Host, Server, Resources)
- Transport methods (STDIO vs HTTP)
- FastMCP framework basics

### ğŸ—ï¸ MCP Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        MCP ARCHITECTURE                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       JSON-RPC       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚           â”‚                      â”‚   MCP SERVER    â”‚             â”‚
â”‚  â”‚  MCP HOST â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                 â”‚             â”‚
â”‚  â”‚           â”‚    request/response  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    API      â”‚
â”‚  â”‚  Claude   â”‚                      â”‚  â”‚  TOOLS    â”‚  â”‚   calls     â”‚
â”‚  â”‚  Code     â”‚                      â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚
â”‚  â”‚           â”‚                      â”‚  â”‚ â€¢ func1() â”‚  â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚  â”‚ â€¢ func2() â”‚  â”‚             â”‚
â”‚                                     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚             â”‚
â”‚                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                            â”‚                         â”‚
â”‚                                            â–¼                         â”‚
â”‚                                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚                                     â”‚  RESOURCES  â”‚                  â”‚
â”‚                                     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚                  â”‚
â”‚                                     â”‚ â€¢ APIs      â”‚                  â”‚
â”‚                                     â”‚ â€¢ Databases â”‚                  â”‚
â”‚                                     â”‚ â€¢ Files     â”‚                  â”‚
â”‚                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“Š MCP Components

| Component | Description | Examples |
|-----------|-------------|----------|
| **MCP Host** | AI application interface | Claude Code, Claude Desktop, VS Code |
| **MCP Server** | Bridge between AI and tools | NetBox MCP, Custom servers |
| **Resources** | Actual data sources | APIs, Databases, Files |
| **Tools** | Functions AI can execute | get_devices(), get_ips() |

### ğŸ”„ Transport Methods

| Transport | Use Case | Pros | Cons |
|-----------|----------|------|------|
| **STDIO** | Local development | Simple, Secure, No ports | Same machine only |
| **HTTP/SSE** | Remote/Team | Multi-user, Docker-friendly | Network config needed |

### ğŸ“– Transport Decision Guide

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      SCENARIO           â”‚   USE      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Local development       â”‚   STDIO    â”‚
â”‚ Same machine            â”‚   STDIO    â”‚
â”‚ Remote server           â”‚   HTTP     â”‚
â”‚ Docker deployment       â”‚   HTTP     â”‚
â”‚ Team shared             â”‚   HTTP     â”‚
â”‚ Just starting? â­       â”‚   STDIO    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ’¡ Start with STDIO â†’ Graduate to HTTP
```

### ğŸ”— Resources

- [MCP Protocol Documentation](https://modelcontextprotocol.io/)
- [FastMCP Framework](https://gofastmcp.com)
- [Anthropic MCP Guide](https://docs.anthropic.com/en/docs/claude-code/mcp)

---

## Video 12: NetBox + MCP Hands-On Setup

[â–¶ï¸ Watch on YouTube](https://www.youtube.com/watch?v=YOUR_VIDEO_ID)

### ğŸ“‹ Overview

Complete hands-on guide to connect Claude AI to NetBox using Model Context Protocol (MCP) for natural language infrastructure queries.

### ğŸ¯ What You'll Learn

- Install Claude Code CLI on Linux
- Setup UV Python package manager
- Clone and configure NetBox MCP Server
- Create NetBox API token
- Query NetBox using natural language

### ğŸ—ï¸ Lab Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        LAB TOPOLOGY                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚   â”‚  Ansible Node   â”‚            â”‚     NetBox      â”‚               â”‚
â”‚   â”‚  (Claude Host)  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  192.168.1.20   â”‚               â”‚
â”‚   â”‚                 â”‚    API     â”‚                 â”‚               â”‚
â”‚   â”‚ â€¢ Claude Code   â”‚            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚               â”‚
â”‚   â”‚ â€¢ NetBox MCP    â”‚            â”‚  â”‚ 3 Devices â”‚  â”‚               â”‚
â”‚   â”‚ â€¢ UV / Python   â”‚            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚               â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                     â”‚
â”‚   Devices in NetBox:                                                â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚   â”‚ vIOS-R1 â”‚   â”‚ vIOS-R2 â”‚   â”‚ vIOS-R3 â”‚                          â”‚
â”‚   â”‚  .201   â”‚   â”‚  .202   â”‚   â”‚  .203   â”‚                          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                                                                     â”‚
â”‚   âš ï¸ Note: Actual routers NOT required for MCP queries!            â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“– Key Concepts

| Term | Description |
|------|-------------|
| **Node.js** | JavaScript runtime for running CLI tools like Claude Code |
| **NPM** | Node Package Manager - like pip for JavaScript packages |
| **Claude Code** | CLI interface for Claude AI (Linux option) |
| **Claude Desktop** | GUI application (Windows/macOS only - no Linux) |
| **UV** | Fast Python package manager built in Rust (10-100x faster than pip) |
| **MCP Host** | Where the AI runs (Claude Code in our case) |
| **MCP Server** | Bridge that translates AI requests to API calls |
| **Tools** | Functions the AI can call (e.g., netbox_get_objects) |
| **Pontification** | Claude's "thinking out loud" reasoning process |
| **DCIM** | Data Center Infrastructure Management (devices, racks, sites) |
| **IPAM** | IP Address Management (IPs, prefixes, VLANs) |

### ğŸ’» Commands

<details>
<summary>1. Install Node.js 20+</summary>

```bash
# Check if Node.js is installed
node --version

# If not installed, add NodeSource repository
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -

# Install Node.js
sudo apt install -y nodejs

# Verify installation
node --version    # Should show v20.x.x
npm --version     # Should show 10.x.x
```

**What is Node.js?** JavaScript runtime that lets you run JavaScript outside a browser. Many modern CLI tools are built with it.

**What is NPM?** Node Package Manager - like pip for Python or apt for Ubuntu.

</details>

<details>
<summary>2. Install Claude Code CLI</summary>

```bash
# Install Claude Code globally
sudo npm install -g @anthropic-ai/claude-code

# Verify installation
claude --version

# Check available commands
claude --help
```

**Claude Offerings:**
| Option | Platform | Description |
|--------|----------|-------------|
| Claude.ai | Web | Browser-based interface |
| Claude Desktop | Windows/macOS | GUI application (No Linux!) |
| Claude Code | All platforms | CLI interface â† Our choice for Linux |

</details>

<details>
<summary>3. Install UV (Python Package Manager)</summary>

```bash
# Install UV
curl -LsSf https://astral.sh/uv/install.sh | sh

# Add to PATH (current session)
source $HOME/.local/bin/env

# Add to PATH permanently
echo 'source $HOME/.local/bin/env' >> ~/.bashrc
source ~/.bashrc

# Verify installation
uv --version
```

**Why UV?** 10-100x faster than pip, automatically creates virtual environments, handles all dependency resolution.

</details>

<details>
<summary>4. Clone NetBox MCP Server</summary>

```bash
# Create MCP servers directory
mkdir -p ~/mcp-servers
cd ~/mcp-servers

# Clone official NetBox MCP server from NetBox Labs
# Find at: NetBox Labs Docs > MCP Section > GitHub Repository
git clone https://github.com/netboxlabs/netbox-mcp-server.git

# Verify clone
ls -l

# Enter the directory
cd netbox-mcp-server

# View contents
ls -la
```

</details>

<details>
<summary>5. Create NetBox API Token</summary>

```bash
# In NetBox UI:
# 1. Login to NetBox: http://192.168.1.20:8000
# 2. Click your username (top right corner)
# 3. Select "API Tokens"
# 4. Click "+ Add a token"
# 5. Description: "mcp-setup"
# 6. Write enabled: Leave UNCHECKED (read-only is safer)
# 7. Click "Create"
# 8. COPY THE TOKEN IMMEDIATELY - shown only once!
```

</details>

<details>
<summary>6. Test MCP Server Standalone</summary>

```bash
# Navigate to MCP server directory
cd ~/mcp-servers/netbox-mcp-server

# Test MCP server connection (replace with your values)
NETBOX_URL=http://192.168.1.20:8000/ \
NETBOX_TOKEN=your-netbox-api-token \
uv run netbox-mcp-server

# What happens behind the scenes:
# 1. UV creates virtual environment (.venv folder)
# 2. Reads dependencies from pyproject.toml
# 3. Downloads packages (FastMCP, httpx, pydantic, etc.)
# 4. Runs the MCP server

# You should see:
# - FastMCP banner
# - Server name: NetBox
# - Message: "Starting MCP server 'NetBox' with transport 'stdio'"

# Press Ctrl+C to stop the server
```

**What does this prove?** MCP server can connect to NetBox API and is functioning correctly - but running standalone, not connected to Claude yet.

</details>

<details>
<summary>7. Configure Claude Code with MCP Server</summary>

```bash
# Register MCP server with Claude Code
claude mcp add netbox \
  -e NETBOX_URL=http://192.168.1.20:8000/ \
  -e NETBOX_TOKEN=your-netbox-api-token \
  -- uv --directory ~/mcp-servers/netbox-mcp-server run netbox-mcp-server

# Command breakdown:
# claude mcp add netbox     â†’ Add server named "netbox"
# -e NETBOX_URL=...         â†’ Environment variable for URL
# -e NETBOX_TOKEN=...       â†’ Environment variable for token
# -- uv --directory ... run â†’ Command to start the server

# Verify MCP server is registered
claude mcp list

# You should see:
# "Checking MCP server health..."
# "netbox âœ“ Connected"
```

**Difference between Step 6 and Step 7:**
| Step 6 | Step 7 |
|--------|--------|
| Manual standalone test | Register with Claude Code |
| We run the server | Claude manages the server |
| Verify it works | Enable Claude to use it |

</details>

<details>
<summary>8. Start Claude Code</summary>

```bash
# Launch Claude Code
claude

# First-time setup:
# 1. Choose text editor style (6 options) - pick default
# 2. Select login method:
#    - Claude Subscription (Pro/Max) â† Recommended
#    - API Usage (pay per token)
# 3. Browser opens for authentication
# 4. Login and authorize
# 5. Press Enter to continue
# 6. Configure terminal settings (use default)

# Welcome screen shows:
# - Subscription details
# - Model: Claude Opus 4.5
# - Available MCP servers including "netbox"
```

**Login Options:**
| Option | Description | Pricing |
|--------|-------------|---------|
| Claude Subscription | Pro/Max monthly | Fixed monthly fee |
| API Usage | Pay per token | See anthropic.com/pricing |

</details>

<details>
<summary>9. Demo Queries</summary>

```bash
# Inside Claude Code, try these natural language queries:

# Query 1: List all devices
List all devices in my NetBox
# Triggers: netbox_get_objects tool
# Returns: Device ID, Name, Status, Type, Site, Primary IP

# Query 2: Site and role query
Show all devices from Main-DC with their role
# May show "Pontification" (Claude thinking out loud)

# Query 3: IP address query (IPAM)
List all IP addresses assigned to each device
# Queries ipam.ipaddresses object

# Query 4: MAC address query
List all MAC addresses available in NetBox
# Returns: MAC addresses for each interface
```

</details>

<details>
<summary>10. MCP Server Management</summary>

```bash
# List all registered MCP servers
claude mcp list

# Remove an MCP server
claude mcp remove netbox

# Re-add with different settings
claude mcp add netbox \
  -e NETBOX_URL=http://new-ip:8000/ \
  -e NETBOX_TOKEN=new-token \
  -- uv --directory ~/mcp-servers/netbox-mcp-server run netbox-mcp-server

# View MCP server configuration
cat ~/.config/claude-code/mcp.json
```

</details>

<details>
<summary>11. Troubleshooting</summary>

```bash
# If UV times out during package install
UV_HTTP_TIMEOUT=120 uv sync

# If MCP server won't start - reset virtual environment
cd ~/mcp-servers/netbox-mcp-server
rm -rf .venv
uv sync

# If Claude can't connect to MCP server
claude mcp list
# Check for red X marks or "Disconnected" status

# Verify NetBox API is accessible
curl -s http://192.168.1.20:8000/api/ \
  -H "Authorization: Token YOUR_TOKEN" | head -20

# Debug MCP server with logging
NETBOX_URL=http://192.168.1.20:8000/ \
NETBOX_TOKEN=your-token \
uv run netbox-mcp-server 2>&1 | tee mcp-debug.log
```

</details>

### ğŸ¯ Demo Queries Reference

| Query | Tool Called | Data Returned |
|-------|-------------|---------------|
| "List all devices" | netbox_get_objects | Device ID, Name, Status, Type, Site, IP |
| "Show devices from Main-DC with role" | netbox_get_objects | Devices filtered by site with roles |
| "List all IP addresses" | netbox_get_objects (ipam) | IPs, interfaces, assignment status |
| "List all MAC addresses" | netbox_get_objects | MAC addresses per interface |

### âš ï¸ Important Notes

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     IMPORTANT NOTES                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  âœ… READ-ONLY ACCESS                                             â”‚
â”‚     NetBox MCP server only queries data                          â”‚
â”‚     It CANNOT modify your NetBox                                 â”‚
â”‚     Safe for production environments                             â”‚
â”‚                                                                  â”‚
â”‚  âŒ NO SSH TO DEVICES                                            â”‚
â”‚     We're querying NetBox (source of truth)                      â”‚
â”‚     NOT the actual network devices                               â”‚
â”‚     For device access â†’ Video 13: Custom MCP Server              â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ”— Resources

- [NetBox MCP Server GitHub](https://github.com/netboxlabs/netbox-mcp-server)
- [NetBox Labs Documentation](https://netboxlabs.com/docs/)
- [Claude Code Download](https://claude.ai/download)
- [Anthropic Pricing](https://anthropic.com/pricing)
- [UV Package Manager](https://astral.sh/uv)
- [FastMCP Documentation](https://gofastmcp.com)
- [MCP Protocol](https://modelcontextprotocol.io/)

---

## Video 13: Custom MCP Server

ğŸ”œ **Coming Soon**

Build your own MCP server from scratch using FastMCP and Netmiko to SSH into network devices and run commands via natural language.

---

## Video 14: Ansible + MCP Integration

ğŸ”œ **Coming Soon**

Integrate Ansible with MCP to run playbooks and automate network tasks using natural language commands.

---

## Video 15: pyATS + MCP Integration

ğŸ”œ **Coming Soon**

Connect pyATS testing framework with MCP for AI-powered network testing and validation.

---

## ğŸ“š Additional Resources

| Resource | Link |
|----------|------|
| EVE-NG | [eve-ng.net](https://www.eve-ng.net/) |
| NetBox | [netbox.dev](https://netbox.dev/) |
| Ansible Docs | [docs.ansible.com](https://docs.ansible.com/) |
| Docker Docs | [docs.docker.com](https://docs.docker.com/) |
| Fortinet Docs | [docs.fortinet.com](https://docs.fortinet.com/) |
| pyATS Docs | [developer.cisco.com/pyats](https://developer.cisco.com/docs/pyats/) |
| MCP Protocol | [modelcontextprotocol.io](https://modelcontextprotocol.io/) |

---

## ğŸ¤ Connect With Me

[![YouTube](https://img.shields.io/badge/YouTube-FF0000?style=for-the-badge&logo=youtube&logoColor=white)](https://youtube.com/@NetworkCoder)
[![LinkedIn](https://img.shields.io/badge/LinkedIn-0077B5?style=for-the-badge&logo=linkedin&logoColor=white)](https://linkedin.com/in/hadeek)

---

## ğŸ“„ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

---

## ğŸ“ Changelog

### v13.0 (2025-01-31)
- âœ… Updated Video 11: MCP Fundamentals - Quick Breakdown (Theory Only)
- âœ… Added YouTube link for Video 11: https://www.youtube.com/watch?v=DDQL5OQDLJU
- âœ… Added Video 12: NetBox + MCP Hands-On Setup (Complete Hands-On Guide)
- âœ… Split theory (Video 11) and hands-on (Video 12) into separate videos
- âœ… Added comprehensive explanations for Node.js, NPM, UV, Claude offerings
- âœ… Added Step 6 vs Step 7 difference explanation
- âœ… Added login options (Subscription vs API) explanation
- âœ… Added Demo Queries reference table
- âœ… Added Troubleshooting section with common fixes
- âœ… Updated NetBox URL to 192.168.1.20
- âœ… Added Key Concepts table (Pontification, DCIM, IPAM)
- âœ… Added Important Notes box (Read-only, No SSH)
- âœ… Added Video 13: Custom MCP Server (Coming Soon)
- âœ… Added Video 14: Ansible + MCP Integration (Coming Soon)
- âœ… Added Video 15: pyATS + MCP Integration (Coming Soon)

### v12.0 (2025-01-21)
- âœ… Added comprehensive OAuth client secret error troubleshooting to Video 9
- âœ… Documented "Missing netbox to diode client secret" error with screenshots
- âœ… Added step-by-step verification and fix procedures
- âœ… Included complete diagnostic commands and verification checklist
- âœ… Added explanation of correct parameter names and common mistakes
- âœ… Enhanced troubleshooting section with network connectivity fixes

### v11.0 (2025-01-15)
- âœ… Added Video 11: NetBox + MCP Integration
- âœ… Comprehensive MCP setup documentation
- âœ… Claude Code CLI installation guide
- âœ… Natural language NetBox queries

### v10.0 (2025-01-10)
- Initial public release
- Videos 1-10 complete documentation
- Full command reference for all videos

---

â­ **If you find this helpful, please star the repo!** â­
